<app-breadcrumb [title]="'Betaling'" [breadcrumb]="'Betaling'"></app-breadcrumb>

<script src="https://js.stripe.com/v3/"></script>

<section class="section-b-space">
    <div class="container padding-cls">
        <div class="checkout-page">
            <div class="checkout-form">
                <form id='payment-form'>
                    <div class="row">
                        <div class="col-lg-6 col-sm-12 col-xs-12">
                            <div class="checkout-title">
                                <h3>Afsender</h3>
                            </div>
                            <div class="row check-out">
                                <div class="form-group col-md-12 col-sm-12 col-xs-12">
                                    <div class="field-label">Navn</div>
                                    <input type="text" name="name" [formControl]="checkoutForm.controls['name']" value="" placeholder="" autocomplete="off">
                                    <div *ngIf="checkoutForm.controls.name.touched && checkoutForm.controls.name.errors?.required" class="text text-danger">
                                    Navn skal udfyldes.
                                    </div>
                                    <div *ngIf="checkoutForm.controls.name.touched && checkoutForm.controls.name.errors?.pattern" class="text text-danger">
                                    Navn skal være alfabetiske bogstaver.
                                    </div>
                                </div>

                                <div class="form-group col-md-12 col-sm-12 col-xs-12">
                                    <div class="field-label">Adresse</div>
<input type="text" name="address" [formControl]="checkoutForm.controls['address']" value="" placeholder="" autocomplete="off">
                                    <div *ngIf="checkoutForm.controls.address.touched && checkoutForm.controls.address.errors?.required" class="text text-danger">
                                     Adresse skal udfyldes.
                                    </div>
                                    <div *ngIf="checkoutForm.controls.address.touched && checkoutForm.controls.address.errors?.maxlength" class="text text-danger">
                                    Maks 50 tegn.
                                    </div>
                                </div>
                  
                           
                                <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                    <div class="field-label">E-mail</div>
                                    <input type="text" name="email" [formControl]="checkoutForm.controls['email']" value="" placeholder="" autocomplete="off">
                                    <div *ngIf="checkoutForm.controls.email.touched && checkoutForm.controls.email.errors?.required" class="text text-danger">
                                     E-mail skal udfyldes.
                                    </div>
                                    <div *ngIf="checkoutForm.controls.email.touched && checkoutForm.controls.email.errors?.email" class="text text-danger">
                                     Ugyldig e-mail
                                    </div>
                                </div>

                                     <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                    <div class="field-label">Tlf. / Mobil</div>
                                    <input type="text" name="phone" [formControl]="checkoutForm.controls['phone']" value="" placeholder="" autocomplete="off">
                                    <div *ngIf="checkoutForm.controls.phone.touched && checkoutForm.controls.phone.errors?.required" class="text text-danger">
                                        Tlf. / Mobil skal udfyldes.
                                    </div>
                                    <div *ngIf="checkoutForm.controls.phone.touched && checkoutForm.controls.phone.errors?.pattern" class="text text-danger">
                                        Tlf. / Mobil skal være numerisk.
                                    </div>
                                </div>
                                <!-- 
                                <div class="form-group col-md-12 col-sm-12 col-xs-12">
                                    <div class="field-label">Land</div>
                                    <select name="country" [formControl]="checkoutForm.controls['country']">
                                        <option value="" selected>Vælg Land</option>
                                        <option value="Danmark">Danmark</option>
                                        <option value="EU">EU</option>
 
                                    </select>
                                    <div *ngIf="checkoutForm.controls.country.touched && checkoutForm.controls.country.errors?.required" class="text text-danger">
                                    Land skal vælges.
                                    </div>
                                </div> -->
                            

                                <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                    <div class="field-label">Postnr.</div>
                                    <input type="text" name="zipcode" [formControl]="checkoutForm.controls['zipcode']" value="" placeholder="" autocomplete="off">
                                    <div *ngIf="checkoutForm.controls.zipcode.touched && checkoutForm.controls.zipcode.errors?.required" class="text text-danger">
                                        Postnr. skal udfyldes.
                                    </div>
                                </div>
                                <div class="form-group col-md-6 col-sm-12 col-xs-12">
                                    <div class="field-label">By</div>
                                    <input type="text" name="town" [formControl]="checkoutForm.controls['town']" value="" placeholder="" autocomplete="off">
                                     <div *ngIf="checkoutForm.controls.town.touched && checkoutForm.controls.town.errors?.required" class="text text-danger">
                                     By skal udfyldes.
                                    </div>
                                </div>
                                <!-- 
                                <div class="form-group col-md-12 col-sm-6 col-xs-12">
                                    <div class="field-label">Stat</div>
                                    <input type="text" name="state" [formControl]="checkoutForm.controls['state']" value="" placeholder="" autocomplete="off">
                                     <div *ngIf="checkoutForm.controls.state.touched && checkoutForm.controls.state.errors?.required" class="text text-danger">
                                     Stat
                                    </div>
                                </div>-->
                      
                            </div>
                         <!-- 
                          <div class="row margin-cls">
                            <div class="col-12"> 
                              <div class="stripe-section">
                                <h5>paypal</h5>
                                <div class="content">
                                  <h5>test betaling</h5>
                                  <table>
                                    <tr>
                                      <td>kort nummer</td>
                                      <td>4152521541244</td>
                                    </tr>
                                    <tr>
                                      <td>mm/yy</td>
                                      <td>11/18</td>
                                    </tr>
                                    <tr>
                                      <td>cvc</td>
                                      <td>521</td>
                                    </tr>
                                  </table>
                                </div>
                              </div>
                            </div>
                          </div> -->
                        </div>

                        <div class="col-lg-6 col-sm-12 col-xs-12">

                            <div class="checkout-title">
                                <h3>Modtager</h3>
                            </div>
                            <div class="row check-out">
                            <div class="form-group col-md-12 col-sm-12 col-xs-12">

                            <div class="field-label">Navn</div>
                            <input type="text" name="shipmondoname" 
                            [formControl]="checkoutForm.controls['shipmondoname']" 
                            value="" placeholder="" autocomplete="off">

                            </div>

                            <div class="form-group col-md-12 col-sm-12 col-xs-12">

                                <div class="field-label">Adresse</div>
                                <input type="text" name="shipmondoaddress" 
                                [formControl]="checkoutForm.controls['shipmondoaddress']" 
                                value="" placeholder="" autocomplete="off">
                                                            </div>

                            <div class="form-group col-md-6 col-sm-6 col-xs-12">

                            <div class="field-label">E-mail</div>
                            <input type="text" name="shipmondoemail" 
                            [formControl]="checkoutForm.controls['shipmondoemail']" 
                            value="" placeholder="" autocomplete="off">

                            </div>
                            <div class="form-group col-md-6 col-sm-6 col-xs-12">
                                <div class="field-label">Tlf. / Mobil</div>
                                
                                <input type="text" name="shipmondophone" 
                                [formControl]="checkoutForm.controls['shipmondophone']" 
                                value="" placeholder="" autocomplete="off">
                                
                                                            </div>

                            <div class="form-group col-md-6 col-sm-6 col-xs-12">

<div class="field-label">Postnummer</div>

<input type="text" name="shipmondozipcode" 
[formControl]="checkoutForm.controls['shipmondozipcode']" 
value="" placeholder="" autocomplete="off">
                            </div>
                            <div class="form-group col-md-6 col-sm-6 col-xs-12">

<div class="field-label">By</div>

<input type="text" name="shipmondotown" 
[formControl]="checkoutForm.controls['shipmondotown']" 
value="" placeholder="" autocomplete="off">
                            </div>
                   
                        </div>

                        
                        </div>

                        <div class="row ">
                            <div class="col-lg-6 col-sm-12 col-xs-12">
                                <div class="stripe-section shipping-section">


                                    <h5>Forsendelse</h5>

<div class="shipping">
   <div class="shopping-option">
       <input type="radio" name="shipping" checked="checked" id="free-shipping">
       <label for="free-shipping">Pakkelevering</label>
   </div>
   <div class="shopping-option">
       <input type="radio"  name="shipping" id="local-pickup">
       <label for="local-pickup">Selvhenter</label>
   </div>

<button class="btn-solid btn shipmondo" (click)="getServicePoints()">Vælg afhentningssted </button>

<div *ngIf="servicepoint" class="selectServicePoint">
    <label>Vælg fra listen 
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black" width="18px" height="18px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"/></svg></label>
<select [ngModel]="selectedServicePoint" (ngModelChange)="onSelectedServicePoint($event)" name="selectedServicePoint" >
   
    <option *ngFor="let service of servicepoint" [ngValue]="service">
{{service.agent}}<br />
{{service.name}}<br />
{{service.address}}<br /> 
{{service.zipcode}}, {{service.city}} <br /> 
ID: {{service.id}}<br />
</option>

</select>
</div>

<div *ngIf="selectedServicePoint" class="selectedServicePoint">
<p>Du har valgt: <br />
Leveringsagent: <strong>{{selectedServicePoint.agent}}</strong><br />
Afhentningssted: <strong>{{selectedServicePoint.name}}</strong><br />
Adresse: <strong>{{selectedServicePoint.address}}</strong><br /> 
Postnummer, By: <strong>{{selectedServicePoint.zipcode}}, <strong></strong>{{selectedServicePoint.city}}</strong> <br /> 
<!-- Afstand:  {{selectedServicePoint.distance}} <br />  -->
Afhentningsted ID: <strong>{{selectedServicePoint.id}}</strong><br />
</p>

<div class="quotes" *ngIf="quotes">
    <p>
Leveringstype: <strong>{{quotes.description}}</strong><br />
Pris: <strong>{{quotes.price}}</strong><br />

Pris ekskl. moms: <strong>{{quotes.price_before_vat}}</strong>
</p>
</div>
</div>
<div>
<!-- 
<button mat-icon-button class="button" (click)="createServiceOrder()">Send Order</button>
<button mat-icon-button class="button" (click)="createShipment()">Test send levering</button>

<button mat-icon-button class="button" (click)="test()">Test</button>-->


</div>

</div>


                      
                                <h5>stripe test betaling</h5>
                                <div class="content">
                                  <h5>test betaling - benyt nedenstående data</h5>
                                  <table>
                                    <tr>
                                      <td>kort nummer</td>
                                      <td>4000002080000001</td>
                                    </tr>
                                    <tr>
                                      <td>mm/yy</td>
                                      <td>02/2022</td>
                                    </tr>
                                    <tr>
                                      <td>cvc</td>
                                      <td>222</td>
                                    </tr>
                                  </table>
                                </div>
                              </div>
                            </div>
                            <div class="col-lg-6 col-sm-12 col-xs-12">   <div class="checkout-details">
                                <div class="order-box">

                                   
                                <div class="title-box">
                                    <h5>BETALING</h5>
                                </div>
                                <ul class="qty" *ngIf='products.length'>
                                    <li *ngFor="let product of products">
                                         {{ product.title }} × {{ product.quantity }}
                                        <span>
                                            {{ (product.price | discount:product) * productService?.Currency.price | currency:productService?.Currency.currency:'symbol':'2.0':'da' }}
                                        </span>
                                    </li>
                                </ul>
                                <ul class="qty" *ngIf='!products.length'>
                                    <li class="empty-checkout"> Der er ingen produkter i kurven </li>
                                </ul>
                                  
                                    <ul class="sub-total">
                                        <li>
                                        	Subtotal <span class="count">{{ getTotal | async | currency:productService?.Currency.currency:'symbol':'2.0':'da'}}</span>
                                        </li>
                                        <li *ngIf='products.length'>
                                        
                                        </li>
                                    </ul>
                                    <ul class="total">
                                        <li>Total <span class="count">{{ this.amount | currency:productService?.Currency.currency:'symbol':'2.0':'da' }}</span></li>
                                    </ul>
                                </div>

                             <!--   <app-select-carrier></app-select-carrier> --> 

                                <div class="payment-box" *ngIf='products.length'>
                                    <div class="upper-box">
                                        <div class="payment-options">
                                            <h5>BETALING</h5>
                                            <ul>
                                                <li>
                                                    <div class="radio-option">
                                                        <input type="radio" [(ngModel)]="payment" [value]="'Stripe'"  name="payment-group" id="payment-2">
                                                        <label for="payment-2">Stripe Kortbetaling
                                                            <span class="small-text"></span></label>
                                                    </div>
                                                </li>
<!-- 
                                                <li>
                                                    <div class="radio-option paypal">
                                                        <input type="radio" [(ngModel)]="payment" [value]="'Paypal'" name="payment-group" id="payment-3">
                                                        <label for="payment-3">PayPal<span class="image"><img src="assets/images/paypal.png" alt="" /></span></label>
                                                    </div>
                                                </li> -->
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="text-right">

                    <!-- placeholder for Elements -->
                    <div id="card-element"></div>
                      <!-- We'll put the error messages in this element -->
  <div id="card-errors" role="alert"></div>
 </div>
 <button id="betaling" class="btn-solid btn" type="submit">Betal</button>
                                </div>
                            </div></div>

                            
                          </div>
                    </div> 
                </form>

        
          
 
          
       
            </div>
        </div>
    </div>
</section>